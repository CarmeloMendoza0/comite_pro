{% extends 'base.html' %} 

{% block title %}Lista de Cuentas{% endblock %} 

{% block content %}
<div class="flex justify-between items-center mb-4 p-6">
  <h1 class="text-2xl font-bold">Lista de Cuentas</h1>
  <a
    href="{% url 'cuenta_create' %}"
    class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
  >
    Crear Nueva Cuenta
  </a>
</div>

<!-- Formulario de búsqueda -->
<!-- Contenedor del Formulario de búsqueda centrado -->
<div class="flex justify-center mb-4">
  <form method="get" action="" class="w-full max-w-md">
      <div class="flex items-center">
          <input type="text" name="query" placeholder="Buscar cuenta" value="{{ request.GET.query }}"
                 class="border border-gray-300 p-2 rounded-l-lg w-full">
          <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600">
              Buscar
          </button>
      </div>
  </form>
</div>


<table class="min-w-full mt-6 bg-white border border-gray-200">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">Código</th>
      <th class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">Nombre</th>
      <th class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">Nivel</th>
      <th class="px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase">Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for cuenta in cuentas %}
    <tr class="border-b">
      <td class="px-6 py-2">{{ cuenta.codigo }}</td>
      <td class="px-6 py-2">{{ cuenta.nombre }}</td>
      <td class="px-6 py-2">{{ cuenta.nivel }}</td>
      <td class="px-6 py-2">
        <a
          href="{% url 'cuenta_update' cuenta.pk %}"
          class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600"
        >
          Editar
        </a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" class="text-center py-4 text-gray-500">
        No hay cuentas disponibles.
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Paginación -->
<div class="mt-4">
  {% if is_paginated %}
      <div class="flex justify-between">
          {% if page_obj.has_previous %}
              <a href="?page={{ page_obj.previous_page_number }}&query={{ request.GET.query }}" class="bg-gray-500 text-white py-2 px-4 rounded-lg">
                  Anterior
              </a>
          {% else %}
              <span class="py-2 px-4 text-gray-500">Anterior</span>
          {% endif %}

          <span>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>

          {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}&query={{ request.GET.query }}" class="bg-gray-500 text-white py-2 px-4 rounded-lg">
                  Siguiente
              </a>
          {% else %}
              <span class="py-2 px-4 text-gray-500">Siguiente</span>
          {% endif %}
      </div>
  {% endif %}
</div>

{% endblock content %}
